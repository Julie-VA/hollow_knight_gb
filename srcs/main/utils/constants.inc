INCLUDE "srcs/main/utils/hardware.inc"

; How this works:
; 1st line sets sprites_tiles_start to 0
; 2nd line sets PLAYER_TILES_START to _VRAM
; 3rd line sets HUD_TILES_START to _VRAM + (19*16)
; 3rd line sets ENEMIES_TILES_START to _VRAM + (19*16) + (8*16)
RSRESET
DEF sprites_tiles_start	RB _VRAM
DEF PLAYER_TILES_START	RB 19*16
DEF HUD_TILES_START		RB 8*16
DEF ENEMIES_TILES_START	RB 6*16

; Movement speeds
DEF ONE_PIXEL_EVERY_2F		EQU 128
DEF THREE_PIXELS_EVERY_7F	EQU 110
DEF ONE_PIXEL_EVERY_3F		EQU 86
DEF ONE_PIXEL_EVERY_4F		EQU 64

DEF PLAYER_MOVE_SPEED	EQU 1

; Player values
DEF PLAYER_HEIGHT	EQU 16
DEF PLAYER_LENGTH	EQU 8

; Jump
DEF GRAVITY				EQU 1
DEF GRAVITY_ACCU		EQU 1
DEF GRAVITY_ACCU_MAX	EQU 3
DEF JUMP_STRENGHT		EQU 30
DEF MAX_DOWN_VELOCITY	EQU 2
DEF MAX_UP_VELOCITY		EQU -2

; Attack
DEF ATTACK_TIME				EQU 6
DEF AFTER_EFFECT_TIME		EQU 12
DEF ATTACK_COOLDOWN			EQU 24
DEF ATTACK_FOLLOWUP_WINDOW	EQU 8
DEF ATTACK_NOT				EQU 0
DEF ATTACK_RIGHT			EQU 1
DEF ATTACK_LEFT				EQU 2
DEF ATTACK_UP				EQU 3
DEF ATTACK_DOWN				EQU 4

; Hit
DEF INVINCIBILITY_TIME	EQU 78 ; 1.3 seconds = 78 frames at 60fps https://hollowknight.fandom.com/wiki/Stalwart_Shell
DEF RECOIL_TIME			EQU 12 ; 0.2 seconds = 12 frames at 60fps
DEF HITPAUSE_TIME		EQU 18

; Enemies
DEF CRAWLID						EQU 0
DEF CRAWLID_HEALTH				EQU 8
DEF VENGEFLY					EQU 1
DEF VENGEFLY_HEALTH				EQU 8
DEF VENGEFLY_IDLE_MOV_LENGTH	EQU 10
DEF VENGEFLY_IDLE_WAIT_LENGTH	EQU 80
DEF VENGEFLY_RADIUS				EQU 64

DEF MAX_ENEMY_COUNT		EQU 2

RSRESET
DEF enemy_active_byte		RB 1
DEF enemy_y_byte			RB 1
DEF enemy_x_byte			RB 1
DEF enemy_health_byte		RB 1
DEF enemy_type_byte			RB 1
DEF enemy_end_byte			RB 1 ; 0 = end of the struct, 1 = there is another enemy after
DEF PER_ENEMY_BYTES_COUNT	RB 0